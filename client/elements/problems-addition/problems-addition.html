<link rel="import" href="../../bower_components/polymer/polymer.html">
<dom-module id="problems-addition">
  <template>
    <style>
    :host {
      display: block;
    }
    
    .container {
      padding: 50px;
      position: relative;
    }
    
    paper-fab {
      background-color: #F5A503;
    }
    
    paper-material {
      top: 100px;
      height: 250px;
      max-width: 400px;
      margin: 16px auto;
      background-color: #eee;
      text-align: center;
    }
    </style>
    <paper-material elevation="1" horizontal layout>
      <div class="container">What is <span><strong>{{question.nums.0}} {{question.operator}} {{question.nums.1}}</strong></span> ?</div>
      <input value="{{studentAnswer::input}}">
      <paper-fab icon="send" on-tap="evaluate"></paper-fab>
      <p>{{message}}</p>
    </paper-material>
  </template>
  <script src="../../lib/mpgen.js"></script>
  <script>
  //TODO this should not go here
  function getProblemBySetId(id) {
    console.log(id);
    if (id === 0) {
      return mpgen.simpleAddition(0, 10);
    }
     else if (id === 1) {
      return mpgen.simpleAddition(0, 1000);
    }
     if (id === 2) {
      return mpgen.simpleSubtraction(0, 10);
    }
  }
  
  Polymer({
    is: 'problems-addition',

    properties: {
      question: {
        type: Object,
        computed: 'getProblem(problemtype, changed)',
        notify: true
      },

      studentAnswer: {
        type: Number,
        notify: true
      },

      message: {
        type: String
      },

      problemtype: {
        type: Number
      },

      changed: {
        type: Number,
        value: 0,
        notify: true
      }
    },

    getProblem: function() {
      return getProblemBySetId(this.problemtype);
    },

    evaluate: function() {
      if (this.studentAnswer == this.question.answer) {
        this.message = 'Correct!';
      } else {
        this.message = 'Incorrect. :(';
      }
      this.studentAnswer = '';
      this.changed++;
    }
  });
  </script>
</dom-module>
